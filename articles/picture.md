2018-08-07

Использование тега ```<picture>``` для изображений
-
Изображение на главной странице гостиничного сайта должно быть привлекательно не только для людей, но и для роботов, которые зашли для индексации страниц.
Очень важно, чтобы главное изображение гостиницы было красивым и попадало в индексацию поисковиков, таких как Yandex или Google. В виду особенностей некоторых браузеров и "неповоротливости" тега ```<img>```
изображения в главном слайдере добавлялись через стили ```background-image``` тега ```<div>```, что давало пользователю корректное изображение во всех браузерах и на всех разрешениях экрана, 
однако, полностью делало невидимым для поисковиков.

Увы, но это так. Мы жертвовали seo-оптимизацией в угоду красивой картинке. 

С недавнего времени эта ситуация сдвинулась с места, благодаря использованию свойства ```object-fit: cover```.
Единственным минусом использования этого свойства является, что его никак не понимает Internet Explorer. Но и для этого случая был найден выход посредством
использования директивы CSS ```@supports```.

Старый подход никак не учитывал современные требования к адаптивности сайта. На всех типах устройства, по умолчанию, загружалось одно и то же изображение, которое должно было быть с большим разрешением.
 
Для решения этого вопроса мы стали применять связку тегов ```<picture> ``` и```<source> ``` к дополнению к простому ```<img>```. Дело в том, что когда пользователь
заходит на страницу с мобильного устройства или планшета ему нет необходимости подгружать ту же самую картинку по размерам, что и на основной версии сайта. Тем самым мы экономим пользователю трафик, и ускоряем загрузку сайта на смартфонах и планшетах.

Техническая реализация выглядит следующим образом:

HTML

```
<picture class="picture">
    <source media="(min-width: 1200px)" srcset="/upload/1920_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg">
    <source media="(min-width: 992px)" srcset="/upload/1200_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg">
    <source media="(min-width: 768px)" srcset="/upload/991_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg">
    <source media="(min-width: 481px)" srcset="/upload/767_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg">
    <source media="(min-width: 320px)" srcset="/upload/480_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg">
    <img class="picture__image" src="/upload/resize_cache/1920_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg" srcset="/upload/resize_cache/iblock/fc6/1920_880_2/fc6e0ab8e9c7280624fa8628f63e5e74.jpg" alt="«Москва»">
</picture>
```

SCSS

```
.picture {
  display: block;
  width: 100%;
  height: 100%;

  &__image {
    width: 100%;
    height: auto;
    position: relative;
    left: 50%;
    top: 50%;
    transform: translateX(-50%) translateY(-50%);

    @media (max-width: 1200px) {
      height: 100%;
      width: auto;
    }
  }

  @supports (object-fit: cover) {
    &__image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: initial;
      left: initial;
      top: initial;
      transform: translateX(0) translateY(0);
    }
  }
}
```
